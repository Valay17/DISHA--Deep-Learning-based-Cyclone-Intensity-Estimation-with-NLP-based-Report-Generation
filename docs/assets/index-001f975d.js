(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();document.getElementById("send-alert-btn").addEventListener("click",async()=>{try{const t=await(await fetch("/send-alert",{method:"POST"})).text();console.log(t),alert("Alert SMS sent successfully")}catch(e){console.error("Error sending alert SMS:",e),alert("Error sending alert SMS. Please try again.")}});document.getElementById("open-popup-btn").addEventListener("click",function(){document.getElementById("popup").style.display="block"});document.getElementById("close-popup-btn").addEventListener("click",function(){document.getElementById("popup").style.display="none"});document.getElementById("submit-btn").addEventListener("click",function(){document.getElementById("popup").style.display="none"});const L={light:`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M5 11.4597C5 15.6241 8.4742 19 12.7598 19C16.0591 19 18.8774 16.9993 20 14.1783C19.1109 14.5841 18.1181 14.8109 17.0709 14.8109C13.2614 14.8109 10.1732 11.8101 10.1732 8.1084C10.1732 6.56025 10.7134 5.13471 11.6205 4C7.87502 4.5355 5 7.67132 5 11.4597Z"
      stroke="#0F172A"
      stroke-width="1.5"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </svg>
  `,dark:`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z"
      stroke="#0F172A"
      stroke-width="1.5"
    />
  
    <path
      d="M18.3117 5.68834L18.4286 5.57143M5.57144 18.4286L5.68832 18.3117M12 3.07394V3M12 21V20.9261M3.07394 12H3M21 12H20.9261M5.68831 5.68834L5.5714 5.57143M18.4286 18.4286L18.3117 18.3117"
      stroke="#0F172A"
      stroke-width="1.5"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </svg>
  `,favicon:{light:"src/img/favicon-dark.ico",dark:"src/img/favicon-light.ico"},alert:`
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  
    <path
      d="M3.35288 8.95043C4.00437 6.17301 6.17301 4.00437 8.95043 3.35288C10.9563 2.88237 13.0437 2.88237 15.0496 3.35288C17.827 4.00437 19.9956 6.17301 20.6471 8.95043C21.1176 10.9563 21.1176 13.0437 20.6471 15.0496C19.9956 17.827 17.827 19.9956 15.0496 20.6471C13.0437 21.1176 10.9563 21.1176 8.95044 20.6471C6.17301 19.9956 4.00437 17.827 3.35288 15.0496C2.88237 13.0437 2.88237 10.9563 3.35288 8.95043Z"
      stroke="#0F172A"
      stroke-width="1.5"
    />
  
    <path d="M12 15.5V11.5" stroke="#0F172A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    
    <circle cx="12" cy="9" r="0.5" stroke="#0F172A" stroke-linecap="round" stroke-linejoin="round" />
  </svg>
  `},W=document.querySelector('link[rel="shortcut icon"]'),T=document.querySelector("html"),v=document.querySelector(".theme-button");let d=localStorage.getItem("theme");function S(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}W.href=L.favicon[S()];d==="light"||d==="dark"?(T.classList.add(d),v.innerHTML=L[d]):(d="auto",localStorage.setItem("theme",d),v.innerHTML=L[S()]);const D=()=>{d==="light"||d==="dark"?(T.classList.remove(d),d="auto",localStorage.setItem("theme",d),v.innerHTML=L[S()]):(S()==="light"?d="dark":d="light",localStorage.setItem("theme",d),T.classList.add(d),v.innerHTML=L[d])};v.addEventListener("click",D);const A=()=>{const e=document.querySelector(".hourly-weather-forecast-section");for(let t=0;t<5;t++){const n=document.createElement("div");n.classList.add("hourly-weather-forecast-card");const a=document.createElement("div");a.classList.add("hourly-weather-forecast-date-time");const r=document.createElement("div");r.classList.add("hourly-weather-forecast-date","loading","dynamic-data"),r.innerHTML="&nbsp;";const s=document.createElement("div");s.classList.add("hourly-weather-forecast-time","loading","dynamic-data"),s.innerHTML="&nbsp;";const c=document.createElement("div");c.classList.add("hourly-weather-forecast-temperature","loading","dynamic-data"),c.innerHTML="&emsp;&emsp;",a.appendChild(r),a.appendChild(s),n.appendChild(a),n.appendChild(c),e.appendChild(n)}},I=()=>{const e=document.querySelector(".daily-forecast-section");for(let t=0;t<20;t++){const n=document.createElement("div");n.classList.add("daily-weather-forecast-card");const a=document.createElement("div");a.classList.add("daily-weather-forecast-date-time");const r=document.createElement("div");r.classList.add("daily-weather-forecast-date","loading","dynamic-data"),r.innerHTML="&nbsp;";const s=document.createElement("div");s.classList.add("daily-weather-forecast-time","loading","dynamic-data"),s.innerHTML="&nbsp;";const c=document.createElement("img");c.classList.add("daily-weather-forecast-icon","loading","dynamic-data");const o=document.createElement("div");o.classList.add("daily-forecast-weather-details");const l=document.createElement("div");l.classList.add("daily-weather-forecast-temperature","loading","dynamic-data"),l.innerHTML="&emsp;&emsp;";const m=document.createElement("div");m.classList.add("daily-weather-forecast-description","loading","dynamic-data"),m.innerHTML="&emsp;&emsp;",a.appendChild(r),a.appendChild(s),n.appendChild(a),n.appendChild(c),o.appendChild(l),o.appendChild(m),n.appendChild(o),e.appendChild(n)}},x=async()=>{const e=document.querySelectorAll(".dynamic-data");document.querySelector(".search-box-input").blur();for(let n=0;n<e.length;n++)e[n].classList.add("loading")},$=async()=>{const e=document.querySelectorAll(".dynamic-data");for(let t=0;t<e.length;t++)e[t].classList.remove("loading")},b=async(e,t)=>{const n=document.querySelector("body"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div");a.classList.add("alert"),r.classList.add("alert-icon"),r.innerHTML=L.alert,s.classList.add("alert-message"),s.innerHTML=e,c.classList.add("alert-button"),c.innerHTML=t,a.appendChild(r),a.appendChild(s),a.appendChild(c),n.insertBefore(a,n.children[1]),$(),t==="Refresh Page"?c.addEventListener("click",()=>{location.reload()}):c.addEventListener("click",()=>{const o=document.querySelector(".search-box-input");o.value="",o.focus(),a.remove()})},C=async e=>{const t=Math.round(e*10)/10;return`${Math.round(t*10)/10%1===0?`${t.toFixed(1)}`:`${t}`}${w==="metric"?"°C":"°F"}`},p=async(e,t)=>{const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=new Date(e*1e3),o=c.getDate(),l=c.getMonth(),m=c.getDay(),h=c.getHours().toString().padStart(2,"0"),f=c.getMinutes().toString().padStart(2,"0"),g=`${o} ${a[l]} ${n[m]}`,u=`${o} ${s[l]} ${r[m]}`;return t==="day"?n[m]:t==="hour"?`${h}:${f}`:t==="short"?u:g},B=async e=>w==="metric"?`${Math.round(e*3.6)} km/h`:`${Math.round(e*2.237)} mph`,P=async e=>w==="metric"?`${(e/1e3).toFixed(2)} km`:`${(e/1609.344).toFixed(2)} miles`,O=async e=>e.replace(/\b\w/g,t=>t.toUpperCase()),k=document.querySelector(".search-box-input");let w="metric";const V=()=>{w=w==="metric"?"imperial":"metric";const e=k.value.trim()===""?"Mumbai":k.value;M(e,w)},j=async(e,t,n)=>{const a=document.querySelector(".current-weather-icon"),r=document.querySelector(".current-weather-temperature"),s=document.querySelector(".current-weather-description"),c=document.querySelector(".current-location"),o=document.querySelector(".current-date"),l=document.querySelector(".wind-speed-value"),m=document.querySelector(".pressure-value"),h=document.querySelector(".sunrise-value"),f=document.querySelector(".humidity-value"),g=document.querySelector(".visibility-value"),u=document.querySelector(".sunset-value");let i;e.lat&&e.lon?i=`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.lon}&appid=${t}&units=${n}`:i=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${t}&units=${n}`;const E=await fetch(i);if(!E.ok)throw E.status===404?new Error(`Sorry, we couldn't find ${e}. Please double-check the spelling and try again.`):new Error("Oops! We're having trouble getting the latest weather information right now. Please try again later or contact support if the problem persists.");const y=await E.json();a.src=`src/img/animated/${y.weather[0].icon}.svg`,r.innerHTML=await C(y.main.temp),s.innerHTML=await O(y.weather[0].description),c.innerHTML=y.name,o.innerHTML=await p(y.dt),l.innerHTML=await B(y.wind.speed),m.innerHTML=`${y.main.pressure} hPa`,h.innerHTML=await p(y.sys.sunrise,"hour"),f.innerHTML=`${y.main.humidity}%`,g.innerHTML=await P(y.visibility),u.innerHTML=await p(y.sys.sunset,"hour")},J=document.getElementById("toggleConversionBtn");J.addEventListener("click",V);const N=async e=>{const t=document.querySelector(".filter-container"),n=new Set(["All Days"]),a=document.querySelector("body");t&&t.remove();for(let o=0;o<e.list.length;o++)n.add(await p(e.list[o].dt,"short"));const r=document.createElement("div");r.classList.add("filter-container"),a.insertBefore(r,a.children[9]),r.addEventListener("wheel",o=>{o.preventDefault(),r.scrollLeft+=o.deltaY*2}),n.forEach(async o=>{const l=document.createElement("div");l.classList.add("filter-item"),o==="All Days"&&l.classList.add("active"),l.innerHTML=o,r.appendChild(l)});const s=document.querySelectorAll(".filter-item");document.querySelectorAll(".daily-weather-forecast-date").forEach(async o=>{o.parentElement.parentElement.style.display="flex"}),s.forEach(async o=>{o.addEventListener("click",async()=>{const l=document.querySelectorAll(".daily-weather-forecast-date");document.querySelectorAll(".filter-item").forEach(async h=>{h.classList.remove("active")}),l.forEach(async h=>{h.parentElement.parentElement.style.display="flex",o.innerHTML==="All Days"?(h.parentElement.parentElement.style.display="flex",o.classList.add("active")):h.innerHTML!==o.innerHTML&&(h.parentElement.parentElement.style.display="none",o.classList.add("active"))})})})},U=async(e,t,n)=>{const a=document.querySelectorAll(".hourly-weather-forecast-date"),r=document.querySelectorAll(".hourly-weather-forecast-time"),s=document.querySelectorAll(".hourly-weather-forecast-temperature"),c=document.querySelectorAll(".daily-weather-forecast-date"),o=document.querySelectorAll(".daily-weather-forecast-time"),l=document.querySelectorAll(".daily-weather-forecast-icon"),m=document.querySelectorAll(".daily-weather-forecast-temperature"),h=document.querySelectorAll(".daily-weather-forecast-description");let f;e.lat&&e.lon?f=`https://api.openweathermap.org/data/2.5/forecast?lat=${e.lat}&lon=${e.lon}&appid=${t}&units=${n}`:f=`https://api.openweathermap.org/data/2.5/forecast?q=${e}&appid=${t}&units=${n}`;const g=await fetch(f);if(!g.ok)throw g.status===404?new Error(`Sorry, we couldn't find ${e}. Please double-check the spelling and try again.`):new Error("Oops! We're having trouble getting the latest weather information right now. Please try again later or contact support if the problem persists.");const u=await g.json();await N(u);for(let i=0;i<5;i++)a[i].innerHTML=await p(u.list[i].dt,"day"),r[i].innerHTML=await p(u.list[i].dt,"hour"),s[i].innerHTML=await C(u.list[i].main.temp);for(let i=0;i<40;i++)c[i].innerHTML=await p(u.list[i].dt,"short"),o[i].innerHTML=await p(u.list[i].dt,"hour"),l[i].src=`src/img/static/${u.list[i].weather[0].icon}.svg`,m[i].innerHTML=await C(u.list[i].main.temp),h[i].innerHTML=u.list[i].weather[0].main},q="2e15438922f629fe6a2605024e986ca2",F=document.querySelector(".search-box-input"),K=document.querySelector(".gps-button"),R=document.querySelector(".cta-button"),Y=document.querySelector(".top-button");A();I();let Z="metric";const M=async(e,t=Z)=>{try{await x(),await j(e,q,t),await U(e,q,t),await $()}catch(n){n.message==="Failed to fetch"?await b("Uh oh! It looks like you're not connected to the internet. Please check your connection and try again.","Refresh Page"):await b(n.message,"Try Again")}},H=async()=>{const e=async n=>{const a={lat:n.coords.latitude,lon:n.coords.longitude};await M(a)},t=n=>{console.log(n),M("Mumbai")};navigator.geolocation.getCurrentPosition(e,t)},_=()=>{window.scrollTo({top:0,behavior:"smooth"})};F.addEventListener("keyup",async e=>{if(e.keyCode===13){const t=F.value.trim()||"Mumbai";await M(t)}});K.addEventListener("click",H);R.addEventListener("click",()=>{window.open("https://mosdac.gov.in/cyclone-genesis/archive")});Y.addEventListener("click",_);H();function z(e,t){return Math.floor(Math.random()*(t-e+1))+e}function G(e){return e<60?"Safe":e<90?"Caution":e<120?"Warning":"Danger"}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("fileInput"),t=document.getElementById("resultText");e.addEventListener("change",function(){setTimeout(function(){const n=z(30,120),a=G(n);t.textContent=`Estimated Wind Speed: ${n} Knots
Classification: ${a}`},5e3)})});
